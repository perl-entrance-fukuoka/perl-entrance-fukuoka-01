それでは先ほど作成したサーバー上にPerlの開発環境を準備する方法をご紹介します。
おおまかな流れは下記の通りです。

1.今回Perlの開発環境を準備する場所（サーバー）について
2.サーバーにログインする方法（SSH）について
3.サーバーの基本操作（コマンド）について
4.プログラムを書く道具（エディタ）について
5.最新のPerlのインストール方法について
6.Perlの道具箱（CPAN）について
7.CPANを使う方法について
8.Webアプリを作る準備（Plackのインストール）について



1.今回Perlの開発環境を準備する場所（サーバー）について
今回Perlの開発環境を準備する場所（サーバー）について説明します。
PerlはMac, Linux, Windows など、いろいろなOSで利用できますが
今回はWebアプリケーションを公開する際に良く用いられるLinuxを
使用します。
Linuxを用いてPerlに入門する事で、Linuxにも入門ができます。
Linuxの使い方を覚えると自分で作ったWebアプリケーションを公開
する時などに便利です。


2.サーバーにログインする方法（SSH）について
Webアプリケーションを公開するサーバーは、通常はデータセンター
というセキュリティや災害対策を考慮した施設で動かします。
これはWebアプリケーションの利用者の大切なデータを保護する為
です。
サーバーは遠隔地にあるので、サーバー上で作業を行うには遠隔
操作をする必要があります。また、誰でも遠隔操作ができてしまう
と大切なデータが危険に晒されてしまうため、ログインをしてから
作業を行う必要があります。

サーバーにログインするにはSSHという方法で行います。
SSHを行う為のソフトはMacとLinuxには標準でインストールされて
います。Windowsの場合は別途インストールする必要があります。
http://www.mita.itc.keio.ac.jp/ja/com_old_sw_putty_install_mc.html

MacとLinux、Windowsそれぞれについて、SSHでログインする方法
を説明します。Windowsの場合はputtyをインストールして起動します。
Macの場合はターミナルを起動します。では手順書にそってやって
みましょう。


3.サーバーの基本操作（コマンド）について
みなさんサーバーにログインできたでしょうか？
ログインするとMacやWindowsの様にメニューやアイコンは表示
されず、文字や記号だけが表示されたと思います。
この記号で囲まれた文字列の部分の事を「（コマンド）プロンプト」
といいます。プロンプトの後ろにはカーソルがあり文字を入力する
ことができます。
このようにLinuxサーバーの操作や結果の表示は文字列（コマンド）
で行います。このような使い勝手のものをCLI（コマンドライン
インターフェース）といい、Linuxサーバーの操作はコマンド
（命令）によって行います。

それではLinuxの基本操作を実際にコマンドを実行して練習しましょう。

みなさんがMacやWindowsを起動した直後はデスクトップが表示
されると思いますが、デスクトップもフォルダの一種です。
MacやWindowsのフォルダの事をLinuxではディレクトリといいます。
デスクトップのようにMacやWindowsを起動した直後に表示される
画面（場所）のことを一般的にホーム(HOME)といいます。

LinuxにもHOMEがあります。みなさんはちょうどログインした直後
の状態だと思いますので、「pwd」と入力してEnterキーをタイプ
してください。「/home/student」と表示されたはずです。
これはstudentユーザーのホームディレクトリという意味です。
これがLinuxのHOMEです。現在作業をしているディレクトリを
表示（Print Working Directory）するので、pwdという名前に
なっています。

次にディレクトリを作成してみましょう。ディレクトリはMacや
Windowsでいうフォルダと同じ意味です。「mkdir renshuu」と
入力してEnterキーをタイプしてください。これは現在の場所
（/home/student）の下にrenshuuというディレクトリを作成する
と言う意味になります。結果は何も表示されません。
Linuxでは表示を必須とするpwdのようなコマンド以外は基本的に
何も出力しません。失敗した場合のみエラーメッセージを表示します。
ディレクトリを作成する（MaKe DIRectory）の略でmkdirと覚え
ましょう。

それでは、実際にrenshuuディレクトリが作成されているか確認
してみましょう。「ls」と入力し、Enterキーをタイプしてください。
「renshuu」と表示されたはずです。lsはディレクトリ内の
ファイルやディレクトリを一覧表示するためのコマンドです。
list（リスト）の略でlsと覚えてください。

では今度は、作成したrenshuuディレクトリに移動してみましょう。
「cd renshuu」と入力し、Enterキーをタイプしてください。
結果は何も表示されません。結果は表示されませんがプロンプト
の表示が変わっていると思います。プロンプトには現在作業中の
ディレクトリ名が表示されます。ディレクトリを変更する（
Change Directory）の略でcdと覚えましょう。

では次に、ファイルを作成してみましょう。「touch renshuu.txt」
と入力し、Enterキーをタイプしてください。結果は何も表示され
ません。lsコマンドを入力し、ファイルが作成されたかを確認して
みましょう。renshuu.txtと表示されたはずです。touchコマンドは
本来はファイルの更新日時などを変更するコマンドですが、まだ
存在しないファイル名を指定した場合は、そのファイルを作成します。
touch＝さわる ですね。

では次にファイルをコピーしてみましょう。「cp renshuu.txt 
renshuu2.txt」と入力し、Enterキーを入力してください。結果
は何も表示されません。lsコマンドを実行してファイルが２つに
なっていることを確認してみましょうコピー（copy）の略でcpと
覚えてください。簡単ですね。

では次にファイルを削除してみましょう。「rm renshuu.txt」と
入力し、Enterキーをタイプしてください。結果は何も表示され
ません。lsコマンドを入力し、ファイルが作成されたかを確認して
みましょう。先ほど作成したrenshuu.txtが無くなっているため
結果は何も表示されなくなっています。取り除く（ReMove）の略
でrmと覚えましょう。

では今度は、ホームディレクトリに戻ってみましょう。
cd .. とだけ入力し、Enterキーをタイプしてください。「..」は
ひとつ上のディレクトリという意味になります。
pwdコマンドを入力すれば「/home/student」と表示されホーム
ディレクトリに移動したことを確認できます。

次にディレクトリを削除してみましょう。空のディレクトリを
削除する場合はrmdirコマンドが使えます。しかし、たいていの
場合、ファイルごとディレクトリを削除したいことが多いので
その場合はrmコマンドを使います。rmコマンドでファイルごと
ディレクトリを削除するには-rオプションをつけます。「rm -r 
renshuu」と入力し、Enterキーをタイプしてください。結果は
何も表示されません。lsコマンドを入力するとrenshuuディレク
トリがなくなっていることがわかります。renshuu2.txtも同時に
削除されています。

次にサーバーのアドレスを確認してみましょう。ifconfigと入力し
Enterキーをタイプしてください。inet addr:192.168.1.151 の
ように表示されている箇所がそのサーバーのアドレスです。
192.168.1.151 の部分は後でWebアプリケーションをブラウザで
確認する時に使います。忘れたときはifconfigコマンドを実行
してください。

4.プログラムを書く道具（エディタ）について
プログラムを書くための道具であるエディタについて説明します。
エディタとはMacのテキストエディットやWindowsのメモ帳のような
文章などの文字列を編集する為のソフトの総称です。今回はLinux
に標準搭載されているviというエディタの強化版であるvimを使います。
標準搭載されているエディタと同じ使い方を覚える事で、今回使用
するサーバー以外でもプログラムやサーバーの設定ファイルなどを
編集する事ができるようになります。また、プロの間では広く利用
されているエディタです。

vimにはモードという概念があり下記のように使いわけます。
http://www15.ocn.ne.jp/~tusr/vim/vim_text0.html
ノーマルモード
    その他のモードに切り替える場合に使う標準の状態です。
    各モードからノーマルモードに戻すにはEscキーをタイプします。
    その他、カーソルの移動や文字の削除などが行えます。
挿入モード
    文字の入力を行うモードです。
    i や a、o をタイプするとこのモードに切り替わります。
コマンドモード
    文字列の検索や置換、その他便利なコマンドを実行する
    モードです。: や /、? をタイプすることで実行できます。
ビジュアルモード
    文字列の範囲選択を行う為のモードです。
    v をタイプすることで利用できます。

それではvimとタイプしてvimエディタを起動しましょう。
画面中央にvimのバージョンや簡単な使い方が英語で表示されます。
起動直後は標準の状態であるノーマルモードになっています。
iとタイプし挿入モードに変更してみましょう。画面左下に「INSERT」
と表示されます。それでは「Hello World !」と入力してみましょう。
入力した文字が表示されているでしょうか？入力ができたらEscキーを
タイプしてノーマルモードに戻ってみましょう。画面左下の「INSERT」
の表示が消えていると思います。では次に文字を削除してみましょう。
「!」マークにカーソルを合わせ、xキーをタイプします。「!」が
消えるはずです。では次にコマンドモードをつかってみましょう。
ノーマルモードで「:w renshuu3.txt 」と入力し、Enterキーをタイプ
してください。画面左下に「"renshuu3.txt" 1L, 13C written」と
いった表示がされたと思います。これはrenshuu3.txtという名前で
ファイルを保存しましたと言う意味です。ワードやエクセルでいう
名前を付けて保存と同じ意味になります。上書き保存をするばあいは
単に「:w」とします。では最後にvimエディタを終了してみましょう。
ノーマルモードで「:q」と入力しEnterキーをタイプしてください。
vimエディタが終了し、Linuxのコマンドプロンプトが表示されます。
保存して終了をしたいときは「:wq」と同時に指定する事も可能です。


5.最新のPerlのインストール方法について
それではいよいよPerlに関連する環境構築の手順を説明して行きます。
まず、PerlはMacでは最初からインストールされており、Linuxでは大抵
の場合インストールされています。Windowsでは別途インストールが必要
です。Perlを含めプログラミング言語にはバージョンがあり、なるべく
新しいバージョンで安定して動くものを使う事が推奨されています。
そこで今回はPerlの最新バージョンをインストールして使用したいと
思います。Perlのインストールを行うにはperlbrewというプログラムを
使います。perlbrewは複数のバージョンのPerlをインストールしたり
切り替えて使うことを目的としたプログラムです。Perlのインストールを
行う為に、まずはperlbrewをインストールしましょう。
下記のコマンドを実行してください。
curl -kL http://install.perlbrew.pl | bash
これでperlbrewのインストールは完了です。
次に下記の２つのコマンドを入力してください。
echo source ~/perl5/perlbrew/etc/bashrc >> ~/.bash_profile
source ~/.bash_profile
これでperlbrewを使う為の設定が完了しました。
ではPerlの最新の安定板をインストールしてみましょう。
perlbrew install --notest perl-5.16.2
インストールにはしばらく時間がかかります。また、--notestは
正しくインストールできたかのテストをしないと言う意味になります。
今回は勉強会の時間の都合上テストを省略していますが、通常は必ず
このオプションを取りテストを行ってください。
次に下記のコマンドを実行してください。
perlbrew swith perl-5.16.2
これでPerlの最新バージョンである5.16.2に切り替える事ができました。
perl -v と入力し5.16.2が表示されていれば成功です。


6.Perlの道具箱（CPAN）について
次にCPANについて紹介します。CPANとはPerlで利用できる便利なライブラリ
モジュール（道具箱）が登録されているサイトです。1995年から11万以上の
モジュールがアップロードされており、一から作成するにはとても面倒な
プログラムが、大抵の場合はCPANモジュールを使う事で解決できます。
Perlを利用する事の最大のメリットとも言えるCPANを是非活用してください。


7.CPANを使う方法とPlackについて
では次にCPANを利用する方法に付いて説明します。
下記のコマンドを実行してください。
perlbrew install-cpanm
これでCPANを利用する準備が整いました。
それでは早速CPANモジュールをインストールしてみましょう。
下記のコマンドを実行してください。
cpanm Plack
Plackというモジュールがインストールされました。簡単ですね。
PlackとはPerlでのWebアプリケーションの開発をとても簡単にしてくれる
モジュールです。では早速、とても簡単なWebアプリケーションを作成して
みましょう。vi app.psgiと入力しEnterキーをタイプしてください。
下記の内容を入力し:wqで保存して終了します。
use strict;
use warnings;
use utf8;
my $app = sub {
    my $env = shift;
    return [
        200,
        ['Content-Type', 'text/html'],
        ['Hello World'],
    ];
};
ではwebアプリケーションを実行してみましょう。
下記のコマンドを実行してください。
plackup app.psgi
ではブラウザで確認してみましょう。
http://192.168.1.151:5000/
Hello World と表示されていれば成功です。


以上でPerlでWebアプリケーションを作成する準備が整いました。
Linuxの基本的な使い方とvimエディタの使い方以外の部分は以外と
短時間でできたのではないかと思います。細かい部分については
いつでも質問を受け付けてますので気軽に聞いてください。

